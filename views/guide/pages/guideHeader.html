<%- include('../header.html') %>
<% 
function inGuild()
{
    return !(typeof(locals.guild) === 'undefined');
}
function getGuilds()
{
    if (typeof(guilds) === 'undefined') return [];
    return guilds.map(g => g.id);
}
function hasGuilds()
{    
    return getGuilds().length > 0;
}
function guideTabLink(text, link)
{
    return include("guideTabLink.html", {
        text, link
    });
}
%>
<div id="toc">
    <div>
        <ul></ul>
    </div>
</div>

<content>
    <h1>User Guide</h1>
    
    <% if (inGuild()) 
    { 
        %><p class="hint">Because you already have the Bot in your server, some steps of this guide can be automated for you!</p><%
    } 
    else
    { 
        if (hasGuilds())
        {
            %><p class="hint">It looks like you already have a server with the bot in it. 
                <% if (getGuilds().length > 1) 
                {
                    %><br />You can automate some of steps below by visiting the user guide after clicking your server in the <a href="/">Unit List</a><%
                }
                else
                {
                    %>You can automate some of steps below. <br /><a class="botFunction" href="/guild/<%=getGuilds()[0]%>/guide">Enable Automated Steps</a><%
                }
                %>
            </p><%
        }
        else
        {
            %><p class="hint">If you connect the Bot to your server early on, you can automate some steps below!</p><%
        }
    } %>

    <section id="minimum">